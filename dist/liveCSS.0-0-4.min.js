// Live CSS, Dynamic CSS module for AngularJS
// > 0.0.4
// > ofzza, 2014.
// > build: Sun Jan 25 2015 15:58:05
"use strict";!function(){var a={},b={unique:0,scheduler:{registry:{},execute:function(c,d,e){b.scheduler.registry[c]?(d?b.scheduler.registry[c].fn=d:d=b.scheduler.registry[c].fn,e?b.scheduler.registry[c].timeout=e:e=b.scheduler.registry[c].timeout):b.scheduler.registry[c]={fn:d,timeout:e,timestamp:0,pending:!1};var f=(new Date).getTime(),g=b.scheduler.registry[c];if(!g.pending)if(e=e>0?e:100,f-g.timestamp>=e)"function"==typeof d&&d(),g.timestamp=(new Date).getTime();else{var h=e-(f-g.timestamp);g.pending=!0,a.$timeout(function(){g.pending=!1,b.scheduler.execute(c)},h)}}}};!function(){var a=angular.module("LiveCss",["LiveCssCore","LiveCssToolkit","LiveCssTimers","LiveCssDirectives"]);a.provider("LiveCss",[function(){return{$get:["LiveCssCore","LiveCssToolkit","LiveCssTimers",function(a,b,c){var d={element:b.element,timer:c};return angular.extend(d,a),d}]}}])}(),function(){var c=angular.module("LiveCssCore",[]),d={documents:{},extensions:{}},e=function(a,b,c){var d=document.createElement("LiveCssParser");d.innerHTML=a;for(var e=d.childNodes,f=[],g=0;g<e.length;g++)if("#comment"!=e[g].nodeName){var i=e[g],j=null;if(i.localName?j=i:i.textContent.trim().length>0&&(j=document.createElement("document"),j.innerHTML=i.textContent),j){for(var k in b)angular.element(j).attr(k,b[k]);f.push(new h(j,c))}}return f},f=function(a,b){var c=function(a){for(var e=0;e<a.childNodes.length;e++)if("#text"==a.childNodes[e].nodeName.toLowerCase()){var f=a.childNodes[e].textContent;f=f.replace(/{{/g,"($lcss-compilation-binding-start:").replace(/}}/g,":$lcss-compilation-binding-end)"),f=f.replace(/\/\*/g,"<lcss-comment>").replace(/\*\//g,"</lcss-comment>"),f=f.replace(/{/g,"<lcss-block>").replace(/}/g,"</lcss-block>");var g=document.createElement("lcss");g.innerHTML=f,d(g),f=b(g.innerHTML),f=f.replace(/\<lcss\-block\>/g,"{").replace(/\<\/lcss\-block\>/g,"}"),f=f.replace(/\<lcss\-comment\>/g,"/*").replace(/\<\/lcss\-comment\>/g,"*/"),f=f.replace(/\(\$lcss-compilation-binding-start\:/g,"{{").replace(/\:\$lcss-compilation-binding-end\)/g,"}}"),a.childNodes[e].textContent=f}else"lcss-comment"!=a.childNodes[e].nodeName.toLowerCase()&&c(a.childNodes[e])},d=function(a){for(var b=0;b<a.childNodes.length;b++)if("lcss-block"==a.childNodes[b].nodeName.toLowerCase()){for(var c=!1,f=0;f<a.childNodes[b].childNodes.length;f++)if("lcss-block"==a.childNodes[b].childNodes[f].nodeName.toLowerCase()){c=!0;break}c?d(a.childNodes[b]):b>0&&"#text"==a.childNodes[b-1].nodeName.toLowerCase()&&(a.childNodes[b-1].textContent=e(a.childNodes[b-1].textContent))}},e=function(a){for(var b=a.split(","),c="",d=0;d<b.length;d++){var e=b[d].trim();c+=(c.length?",":"")+b[d].replace(e,".$lcss-containment-class-placeholder "+e)}return c},f=document.createElement("lcss");return f.innerHTML=a,c(f),a=b(f.innerHTML)},g=function(a,b){return a.replace(/.\$lcss-containment-class-placeholder /g,b?"."+b+" ":"")},h=function(c,e){var h={host:{document:null,compilation:null,interpolation:null},attrs:{global:!1,source:null,compile:null,interpolate:null},"import":[],syntax:{loaded:null,global:null,contained:null,compiled:null,interpolated:null},watcher:null,initialize:function(){var b=angular.element(c);if(b.attr("key")){var f=null;try{f=i.$scope.$eval(b.attr("key").trim())}catch(g){}i.key=f?f:b.attr("key").trim()}b.attr("import")&&b.attr("import").trim().length>0&&(h.import=i.$scope.$eval(b.attr("import").trim()));for(var j in h.attrs)b.attr(j)&&b.attr(j).trim().length>0&&(h.attrs[j]=b.attr(j).trim());b.attr("key",i.key),d.documents[i.key]=i;var k={key:i.key,syntax:c.innerHTML};a.$rootScope.$broadcast("$lcssSyntaxLoaded",k),h.syntax.loaded=k.syntax.trim();var l=h.attrs.global?i.$scope.$eval(h.attrs.global):!1;this.target.add(l===!1?e:null);var m=document.createElement("livecss-document"),n=angular.element(m);n.attr("key",i.key);for(var f in h.attrs)n.attr(f,h.attrs[f]);h.host.document=m,document.head.appendChild(m);var o=function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&"undefined"==typeof b.__proto__[d]&&(c[d]=b[d]);for(var d in a)a.hasOwnProperty(d)&&d&&"$"!=d[0]&&"this"!=d&&"undefined"==typeof a.__proto__[d]&&(c[d]=a[d]);return c};h.watcher=i.$scope.$watch(function(){var b={compilation:h.attrs.compile?i.$scope.$eval(h.attrs.compile):o(a.$rootScope.$lcss,i.$scope),interpolation:h.attrs.interpolate?i.$scope.$eval(h.attrs.interpolate):o(a.$rootScope.$lcss,i.$scope)};return b},function(a,b){!h.syntax.compiled||a.compilation&&!angular.equals(a.compilation,b.compilation)?h.compile():a.interpolation&&!angular.equals(a.interpolation,b.interpolation)&&h.interpolate()},!0)},target:{uniqueClassName:null,processedSyntax:"",hostElements:{keys:[],targets:[]},add:function(a){var b=h.target.isContained();a=a?a.length?a[0]:a:document.body;for(var c=a,d=!1;c;){if("head"==a.tagName.toLowerCase()||"html"==a.tagName.toLowerCase()){d=!0;break}if("body"==a.tagName.toLowerCase()){d=!1;break}if(!a.parentNode){d=!1;break}c=c.parentNode}var e=d?document.body:a;if(!i.className||h.target.processedSyntax!=h.syntax.loaded){i.className||(h.target.uniqueClassName="__lcss-contained-"+i.key);var j=f(h.syntax.loaded,h.unhtmlize);h.syntax.contained=g(j,h.target.uniqueClassName),h.syntax.global=g(j,null),h.target.processedSyntax=h.syntax.loaded}for(var k=!1,l=0;l<h.target.hostElements.keys.length;l++)if(h.target.hostElements.keys[l]==a){k=!0;break}k||(h.target.hostElements.keys.push(a),h.target.hostElements.targets.push(e),angular.element(e).addClass(h.target.uniqueClassName)),null!==b&&b!=h.target.isContained()&&h.compile()},remove:function(a){var b=h.target.isContained();a=a?a.length?a[0]:a:document.body;for(var c=0;c<h.target.hostElements.keys.length;c++)if(h.target.hostElements.keys[c]==a){var d=h.target.hostElements.targets[c];h.target.hostElements.keys.splice(c,1),h.target.hostElements.targets.splice(c,1);for(var e=!1,f=c;f<h.target.hostElements.keys.length;f++)if(h.target.hostElements.targets[f]==d){e=!0;break}e||angular.element(d).removeClass(h.target.uniqueClassName)}null!==b&&b!=h.target.isContained()&&h.compile()},isContained:function(){for(var a=0;a<h.target.hostElements.keys.length;a++)if(h.target.hostElements.targets[a]==document.body)return!1;return h.target.hostElements.keys.length?!0:null}},compile:function(b){if(h.target.processedSyntax!=h.syntax.loaded){var c=f(h.syntax.loaded,h.unhtmlize);h.syntax.contained=g(c,h.target.uniqueClassName),h.syntax.global=g(c,null),h.target.processedSyntax=h.syntax.loaded}var d=h.target.isContained()?h.syntax.contained:h.syntax.global;if(d){if(a.LiveCssDebugger)var e=a.LiveCssDebugger.stats.domains.get(["compile",i.key]).time();h.host.compilation||(h.host.compilation=document.createElement("liveCssCompiler")),h.host.compilation.innerHTML=d;var j=angular.element(h.host.compilation),k=angular.element(h.host.document),l=i.$scope.$new();a.$compile(j)(l,function(c,d){c&&(k.append(c),a.$timeout(function(){var f=c[0].innerHTML;f=f.replace(/\[\[/g,"{{").replace(/\]\]/g,"}}"),d.$destroy(),d.$on("$destroy",function(){c.off()}),c.remove(),c=null;var g=document.createElement("liveCssCompilerCleanup");g.innerHTML=f;do{for(var j=[],k=0;k<g.childNodes.length;k++)g.childNodes[k].localName&&j.push(g.childNodes[k]);for(var k=0;k<j.length;k++)j[k].outerHTML=j[k].innerHTML+"\r\n"}while(j.length>0);f=g.innerHTML;do{var l=f.indexOf("<!--"),m=f.indexOf("-->",l)+"-->".length;l>=0&&m>=0&&(f=f.substr(0,l)+f.substr(m))}while(l>=0&&m>=0);if(f=f.trim(),h.syntax.compiled!=f||!h.attrs.compile||!h.attrs.interpolate){var n={key:i.key,syntax:f};a.$rootScope.$broadcast("$lcssSyntaxCompiled",n),h.syntax.compiled=h.unhtmlize(n.syntax),h.interpolate(b)}e&&e.stop()}))})}},interpolate:function(b){if(h.syntax.compiled){if(a.LiveCssDebugger)var c=a.LiveCssDebugger.stats.domains.get(["interpolate",i.key]).time();var d=a.$interpolate(h.syntax.compiled)(i.$scope);if(h.syntax.interpolated!=d){d=h.unhtmlize(d),h.syntax.interpolated=d,h.host.interpolation||(h.host.interpolation=document.createElement("style"),h.host.document.appendChild(h.host.interpolation));var e={key:i.key,syntax:h.syntax.interpolated};a.$rootScope.$broadcast("$lcssSyntaxInterpolated",e),h.syntax.interpolated=e.syntax,h.host.interpolation.innerHTML=h.syntax.interpolated,b&&b()}c&&c.stop()}},unhtmlize:function(a){for(var b={"&lt;":"<","&gt;":">"},c=0;(c=a.indexOf("&",c))>=0;){var d=a.indexOf(";",c),e=a.substr(c,d-c+1),f=b[e];a=a.substr(0,c)+f+a.substr(d+1),c+=(f?f.length:0)-(e?e.length:0)}return a},destroy:function(){h.watcher(),h.host.document&&angular.element(h.host.document).remove(),h.host.compilation&&angular.element(h.host.compilation).remove(),h.host.interpolation&&angular.element(h.host.interpolation).remove(),i.$scope.$destroy(),i.$scope.$on("$destroy",function(){})}},i={key:((new Date).getTime()+1e6*b.unique++).toString(16),"import":function(){return h.import},attrs:h.attrs,$scope:a.LiveCssCore.pub.$rootScope.$new(),syntax:h.syntax,compile:h.compile,target:{add:h.target.add,remove:h.target.remove},interpolate:h.interpolate,destroy:h.destroy};return h.initialize(),i},i=function(c,e,f,g,h){this.key=c;var i=[];this.setAdditionalKeys=function(a){i=a},d.extensions[c]&&delete d.extensions[c],d.extensions[c]=this;var j=null,k=function(a,b,d,e){a[c]||(a[c]={});var f=b(a[c],d,e);"undefined"!=typeof f&&(a[c]=f)};if(f&&"function"==typeof f){var l=function(){for(var a in d.documents)if("string"==typeof d.documents[a]){if(this.key==d.documents[a])return!0}else{if("object"!=typeof d.documents[a]||"undefined"==typeof d.documents[a].length)return[];if(d.documents[a].indexOf(this.key)>=0)return!0}return!1};j=a.$rootScope.$lcss.$watch(function(){return l()?f():null},function(f,j){b.scheduler.execute(this.key,function(){if(a.LiveCssDebugger)var b=a.LiveCssDebugger.stats.domains.get(["extension","lcss","watched",c],i).time();if(h){var g=a.$rootScope.$lcss;k(g,e,f,j)}else for(var l in d.documents)if(d.documents[l].import().indexOf(c)>=0){var g=d.documents[l].$scope;k(g,e,f,j)}b&&b.stop()},g>0?g:0)},!0)}this.apply=function(){if(a.LiveCssDebugger)var f=a.LiveCssDebugger.stats.domains.get(["extension","lcss","applyed",c],i).time();b.scheduler.execute(this.key,function(){if(h){var b=a.$rootScope.$lcss;k(b,e)}else for(var f in d.documents)if(d.documents[f].import().indexOf(c)>=0){var b=d.documents[f].$scope;k(b,e),b.$$phase||b.$digest()}},g>0?g:0),f&&f.stop()},a.$rootScope.$on("$lcssSyntaxLoaded",function(){if(a.LiveCssDebugger)var b=a.LiveCssDebugger.stats.domains.get(["extension","lcss","loaded",c],i).time();if(h){var f=a.$rootScope.$lcss;k(f,e)}else for(var g in d.documents)if(d.documents[g].import().indexOf(c)>=0){var f=d.documents[g].$scope;k(f,e),f.$$phase||f.$digest()}b&&b.stop()}),this.apply()};c.provider("LiveCssCore",[function(){return{$get:["$compile","$interpolate","$rootScope","$q","$http","$timeout",function(b,c,f,g,h,j){a.$compile=b,a.$interpolate=c,a.$rootScope=f,a.$q=g,a.$http=h,a.$timeout=j,a.$rootScope.$lcss=f.$new(),a.$rootScope.$lcss.fetch=a.$rootScope.$lcss.get=function(a){return k.fetch(a)};var k={$rootScope:a.$rootScope.$lcss,fetch:function(a){if(a&&d.documents[a])return d.documents[a];for(var b in d.documents)if(a&&d.documents[b].attrs.source&&d.documents[b].attrs.source.toLowerCase().trim()==a.toLowerCase().trim())return d.documents[b];return d.documents},get:this.fetch,"import":function(a,b,c){var d=e(a,b?b:{source:null},c);return d},importUrl:function(a,b){var c=g.defer();return h.get(a).then(function(b){return function(d){var e="lcss"==a.split(".")[a.split(".").length-1].toLowerCase().trim(),f=k.import(d.data,{source:a},e?b:null);c.resolve(f)}}(b),function(b){var d=k.import("/*"+b.status+"*/",{source:a,error:b.status});c.resolve(d)}),c.promise},extend:function(a,b,c,d,e){return"number"==typeof c&&"number"!=typeof d&&(d=c),new i(a,b,c,d,e)},$$services:function(){return a}};return a.LiveCssCore={pub:k,prv:d},k}]}}])}(),function(){var c=angular.module("LiveCssToolkit",["LiveCssCore"]),d={element:{uniqueKeyCount:0,elementScope:null,elementScopeDigesting:!1,instantDigest:!1,extensions:{}}},e=function(c,e,f){this.key=c,this.element=e,this.imports=f;var g=this.uniqueKey=e.id?e.id:((new Date).getTime()+1e6*Math.random()).toString(16)+"#"+(d.element.uniqueKeyCount++).toString(16),h=[];if("string"==typeof f)d.element.extensions[f]&&(h=[d.element.extensions[f]]);else if(f&&"object"==typeof f&&"undefined"!=typeof f.length)for(var i=0;i<f.length;i++)d.element.extensions[f[i]]&&h.push(d.element.extensions[f[i]]);else h=[];for(var j=[],k=null,i=0;i<h.length;i++)h[i].events&&(j.push(h[i]),k="number"==typeof h[i].timeout?h[i].timeout:1e3);for(var i=0;i<j.length;i++){var l=j[i],m=function(d,f){return function(h){if(a.LiveCssDebugger)var i=a.LiveCssDebugger.stats.domains.get(["extension","lcss-element","event",c,g],d.getAdditionalKeys()).time();b.scheduler.execute(this.key,function(){for(var b in a.LiveCssCore.prv.documents)if(a.LiveCssCore.prv.documents[b].import().indexOf("element")>=0){var j=a.LiveCssCore.prv.documents[b].$scope;j.element||(j.element={}),j.element[c]||(j.element[c]={}),j.element[c][g]||(j.element[c][g]={});var k=d.applyFn(e,j.element[c][g],f,h);"undefined"!=typeof k&&(j.element[c][g]=k),j.$$phase||j.$digest()}i&&i.stop()},k?k:0)}};if("string"==typeof l.events){var n=m(l,l.events);angular.element(this.element).on(l.events,n),n()}else if("object"==typeof l.events&&"undefined"!=typeof l.events.length)for(var o=0;o<l.events.length;o++){var n=m(l,l.events[o]);angular.element(this.element).on(l.events[o],n),n()}}for(var p=[],q=null,i=0;i<h.length;i++)h[i].events||(p.push(h[i]),q="number"==typeof h[i].timeout?h[i].timeout:1e3);var r=!d.element.elementScope;d.element.elementScope||(d.element.elementScope=a.$rootScope.$lcss.$new(!0)),r&&a.$rootScope.$on("$lcssSyntaxLoaded",function(){d.element.elementScopeDigesting||a.$rootScope.$$phase||d.element.elementScope.$$phase||(d.element.elementScopeDigesting=!0,d.element.elementScope.$digest(),d.element.elementScopeDigesting=!1)});var s=function(){for(var b={},d=0;d<p.length;d++){var f=p[d];if(a.LiveCssDebugger)var h=a.LiveCssDebugger.stats.domains.get(["extension","lcss-element","polling","watch",c,g],f.getAdditionalKeys()).time();var i=f.applyFn(e,b);i&&(b=i),h&&h.stop()}return b},t=function(b,d){for(var e in a.LiveCssCore.prv.documents)if(a.LiveCssCore.prv.documents[e].import().indexOf("element")>=0){var f=a.LiveCssCore.prv.documents[e].$scope;if(d||!f.element||!f.element[c]||f.element[c][g]){f.element||(f.element={}),f.element[c]||(f.element[c]={}),f.element[c][g]||(f.element[c][g]={});for(var h in b)f.element[c][g][h]=b[h]}}},u=null,v=0,w=d.element.elementScope.$watch(function(){if(!e)return w(),null;var b=(new Date).getTime();if(!(d.element.instantDigest||b-v>q))return u;v=b;for(var c in a.LiveCssCore.prv.documents)if(a.LiveCssCore.prv.documents[c].import().indexOf("element")>=0){var f=s();return t(f,!1),f}},function(e){e&&b.scheduler.execute("PolledPropertyChange-"+g,function(){if(a.LiveCssDebugger)var b=a.LiveCssDebugger.stats.domains.get(["extension","lcss-element","polling","apply",c,g]).time();u=e,d.element.instantDigest=!0,t(e,!0),b&&b.stop()},10)},!0);this.destroy=function(){w()}},f=function(a,b,c,e){this.key=a;var f=["?"];this.getAdditionalKeys=function(){return f},this.setAdditionalKeys=function(a){f=a},this.applyFn=b,this.timeout=c,this.events=e,d.element.extensions[a]=this};c.provider("LiveCssToolkit",[function(){return{$get:["LiveCssCore","$timeout",function(b,c){var g={element:{bind:function(a,b,c){if("undefined"!=typeof b.length){for(var d=[],f=0;f<b.length;f++)d.push(new e(a,b[f],c));return d}return new e(a,b[f],c)},extend:function(a,b,c,d){return new f(a,b,c,d)}}},h=Object.create(Math,{});h.round=function(a,b){return"undefined"==typeof b?Math.round(a):Math.round(a*Math.pow(10,b))/Math.pow(10,b)},h.ceil=function(a,b){return"undefined"==typeof b?Math.ceil(a):Math.ceil(a*Math.pow(10,b))/Math.pow(10,b)},h.floor=function(a,b){return"undefined"==typeof b?Math.floor(a):Math.floor(a*Math.pow(10,b))/Math.pow(10,b)},b.extend("Math",function(a){return a=h},null,0,!0);var i=Object.create(Array,{});i.range=function(a,b){for(var c=[],d="undefined"==typeof b?0:a;("undefined"==typeof b?a:b)>d;d++)c.push(d);return c},b.extend("Array",function(a){return a=i},null,0,!0);var j=b.extend("window",function(a){a.size={width:window.innerWidth,height:window.innerHeight}},null,200);j.setAdditionalKeys(["size"]),angular.element(window).on("resize",function(){j.apply()});var k=b.extend("window",function(a){a.scroll={x:window.scrollX,y:window.scrollY}},null,200);k.setAdditionalKeys(["scroll"]),angular.element(window).on("scroll",function(){k.apply()});var l={timeout:{promise:null,interval:1e3,nextExec:0,lastExec:0},position:{x:window.innerWidth/2,y:window.innerHeight/2,history:[]}},m=function(a){return function(b){l.position.history.push({time:(new Date).getTime(),x:b.clientX,y:b.clientY,distance:Math.sqrt(Math.pow(l.position.x-b.clientX,2)+Math.pow(l.position.y-b.clientY,2))}),l.position.history.length>256&&(l.position.history=l.position.history.splice(1)),l.position.x=b.clientX,l.position.y=b.clientY,a.apply()}},n=function(a,b,d){d||(d=1e3);var e=(new Date).getTime()+b;l.timeout.lastExec=l.timeout.lastExec>e?l.timeout.lastExec:e,l.timeout.interval=l.timeout.interval<d?l.timeout.interval:d,function f(a){var b=(new Date).getTime()+l.timeout.interval;(a||!l.timeout.promise||!l.timeout.nextExec||b<l.timeout.nextExec)&&(l.timeout.promise&&(c.cancel(l.timeout.promise),l.timeout.promise=null),l.timeout.promise=c(function(){l.timeout.promise=null,o.apply(),(new Date).getTime()<l.timeout.lastExec&&f()},l.timeout.interval),l.timeout.nextExec=b)}(!0)},o=b.extend("mouse",function(a){a.position={time:(new Date).getTime(),x:l.position.x/window.innerWidth,y:l.position.y/window.innerHeight,clientX:l.position.x,clientY:l.position.y,history:a&&a.position&&a.position.history?a.position.history:{exists:function(a){var b=(new Date).getTime(),c=a&&0!=l.position.history.length?b-l.position.history[l.position.history.length-1].time<a:!1;return a&&c&&n(o,a,a),c},points:function(a,b){var c=(new Date).getTime();if(a){for(var d=[],e=l.position.history.length-1;e>=0;e--)if(c-l.position.history[e].time>a){for(var f=e+1;f<l.position.history.length;f++)d.push(l.position.history[f]);break}return n(o,a,b),d}return l.position.history},distance:function(a,b){var c=(new Date).getTime();if(a){for(var d=0,e=l.position.history.length-1;e>=0&&c-l.position.history[e].time<=a;e--)d+=l.position.history[e].distance;return d&&n(o,a,b),d}return l.position.history.length>0?l.position.history[l.position.history.length-1]:0}}}},null,40);o.setAdditionalKeys(["position"]),angular.element(window).on("mousemove",m(o)),angular.element(window).on("click",m(o)),angular.element(window).on("touchstart",m(o));var p=function(a,b){b.size={width:a.clientWidth,height:a.clientHeight,clientWidth:a.clientWidth,clientHeight:a.clientHeight,offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight}},q=g.element.extend("size",p,200);q.setAdditionalKeys(["size"]);return a.LiveCssToolkit={pub:g,prv:d},g}]}}])}(),function(){var b=angular.module("LiveCssTimers",["LiveCssCore"]),c={};b.provider("LiveCssTimers",[function(){return{$get:["LiveCssCore","$timeout",function(){var b={};return a.LiveCssTimers={pub:b,prv:c},b}]}}])}(),function(){var a=angular.module("LiveCssDirectives",["LiveCssCore","LiveCssToolkit","LiveCssTimers"]),b={},c=function(a,c,d){b[a]||(b[a]={docs:[],elements:[]});for(var e=0;e<c.length;e++)b[a].docs.push(c[e]);return b[a].elements.push(d[0]),b[a]},d=function(a,c){if(b[a]){for(var d=0;d<b[a].elements.length;d++)if(c[0]==b[a].elements[d]){for(var e=0;e<b[a].docs.length;e++)c.length&&c[0].parentNode&&b[a].docs[e].target.remove(c[0].parentNode);b[a].elements.splice(d,1);break}if(0==b[a].elements.length){for(var d=0;d<b[a].docs.length;d++)b[a].docs[d].destroy();delete b[a]}return b[a]}};a.directive("lcss",["LiveCssCore","LiveCssToolkit",function(a){var e=function(a){var b=0;if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return b};return{scope:!0,restrict:"AE",link:function(f,g,h){if(g[0].style.display="none",g&&g.length&&g[0].innerText&&g[0].innerText.trim().length>0){var i=g[0].innerText.trim(),j=e(i);if(b[j]){for(var k=c(j,[],g),l=0;l<k.docs.length;l++)k.docs[l].target.add(g[0].parentNode?g[0].parentNode:null);g.on("$destroy",function(){d(j,g)})}else{var h={source:"inline["+j+"]"},k=a.import(i,h,h.global&&f.$eval(h.global)||!g[0].parentNode?null:g[0].parentNode);g[0].innerText="<!-- LiveCSS syntax imported -->",c(j,k,g),g.on("$destroy",function(){d(j,g)})}}f.$watch(function(){var a=h.src,b=h.global;try{a=f.$eval(a)}catch(c){}try{b=f.$eval(b)}catch(c){}return{src:a,global:b}},function(e,f){if(e&&e.src){d(f,g);var h=e.src,i=e.global;if(b[h]){for(var j=c(h,[],g),k=0;k<j.docs.length;k++)j.docs[k].target.add(g[0].parentNode?g[0].parentNode:null);g.on("$destroy",function(){d(h,g)})}else a.importUrl(h,!i&&g[0].parentNode?g[0].parentNode:null).then(function(a){c(h,a,g),g.on("$destroy",function(){d(h,g)})})}},!0)}}}]),a.directive("lcssElement",["LiveCssCore","LiveCssToolkit",function(a,b){return{scope:!0,restrict:"A",link:function(a,c,d){var e={watcher:null};a.$watch(function(){var b=a.$eval(d.lcssElement);return{key:b?b:d.lcssElement,imports:d.lcssElementImport?a.$eval(d.lcssElementImport):null}},function(a){e.watcher&&e.watcher.destroy(),e.watcher=b.element.bind(a.key,c,a.imports)},!0)}}}])}()}();